/* =============================================================================
   FONTS
   ============================================================================= */

@font-face {
  font-family: "Merriweather";
  src: url("../fonts/Merriweather-VariableFont_opsz,wdth,wght.ttf")
    format("truetype-variations");
  font-weight: 300 900; /* Supports all weights from Light (300) to Black (900) */
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: "Merriweather";
  src: url("../fonts/Merriweather-Italic-VariableFont_opsz,wdth,wght.ttf")
    format("truetype-variations");
  font-weight: 300 900; /* Supports all weights from Light (300) to Black (900) */
  font-style: italic;
  font-display: swap;
}

/* =============================================================================
   CUSTOMIZATION VARIABLES
   ============================================================================= */

:root {
  /* === FONTS === */
  --font-main: "Merriweather", Georgia, "Times New Roman", Times, serif;
  --font-heading: "Merriweather", Georgia, "Times New Roman", Times, serif;
  --font-monospace:
    "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New",
    monospace;

  /* Use standard font weights for compatibility */
  --font-weight-light: 300;
  --font-weight-normal: 400;
  --font-weight-bold: 700;

  /* === FONT SIZES === */
  --text-size-base: 13pt;
  --text-size-small: 8pt;
  --text-size-medium: 9pt;
  --text-size-large: 15pt;
  --text-size-xl: 16pt;
  --text-size-xxl: 18pt;
  --text-size-title: 30pt;
  --text-size-subtitle: 14pt;
  --text-size-tiny: 11pt;

  /* === COLORS - LIGHT THEME === */
  --color-background: white;
  --color-text-primary: #888;
  --color-text-secondary: #bbb;
  --color-text-tertiary: #666;
  --color-text-strong: black;
  --color-accent-primary: #b97c2c;
  --color-accent-dark: #4f3411;
  --color-accent-warning: #cc8f1a;
  --color-border-light: #eee;
  --color-border-medium: #ccc;
  --color-disabled: #ccc;
  --color-hover-bg: rgba(185, 124, 44, 0.1);
  --color-highlight: yellow;
  --color-important: #e74c3c;
  --color-quiet: #7f8c8d;
  --color-code-bg: #f8f9fa;
  --color-blockquote-bg: #f9f9f9;
  --color-blockquote-border: #ccc;
  --color-blockquote-text: #666;

  /* === SPACING === */
  --spacing-xs: 3px;
  --spacing-sm: 6px;
  --spacing-md: 8px;
  --spacing-lg: 10px;
  --spacing-xl: 12px;
  --spacing-xxl: 15px;
  --spacing-huge: 20px;
  --spacing-massive: 60px;

  /* === LAYOUT === */
  --content-max-width: 600px;
  --nav-height-desktop: 60px;
  --nav-height-mobile: 80px;
  --border-radius: 3px;
  --border-radius-lg: 8px;

  /* === TRANSITIONS === */
  --transition-fast: 0.1s;
  --transition-medium: 0.2s;
  --transition-slow: 0.6s;
  --transition-very-slow: 1s;

  /* === LINE HEIGHTS === */
  --line-height-text: 1.7em;
  --line-height-choice: 1.7em;
  --line-height-list: 1.6em;
  --line-height-tight: 1;
}

/* === DARK THEME COLORS === */
body.dark {
  --color-background: black;
  --color-text-primary: white;
  --color-text-secondary: #666;
  --color-text-tertiary: #666;
  --color-text-strong: white;
  --color-accent-primary: #cc8f1a;
  --color-accent-dark: #c4af87;
  --color-accent-warning: #cc8f1a;
  --color-border-light: #333;
  --color-border-medium: #444;
  --color-disabled: #444;
  --color-hover-bg: rgba(204, 143, 26, 0.1);
  --color-code-bg: #2d3748;
  --color-blockquote-bg: #2d3748;
  --color-blockquote-border: #555;
  --color-blockquote-text: #bbb;
}

/* =============================================================================
   BASE STYLES
   ============================================================================= */

body {
  font-family: var(--font-main);
  font-weight: lighter;
  background: var(--color-background);
  overflow: hidden;
  color: var(--color-text-primary);
}

@media screen and (prefers-reduced-motion: no-preference) {
  body.switched {
    transition:
      color var(--transition-slow),
      background-color var(--transition-slow);
  }
}

h1,
h2 {
  text-align: center;
  font-family: var(--font-heading);
  margin: 0;
  padding: 0;
}

h1 {
  font-size: var(--text-size-title);
  font-weight: var(--font-weight-bold)
  margin-bottom: var(--spacing-lg);
}

h2,
.H2 {
  font-size: var(--text-size-subtitle);
  font-style: italic;
  font-family: sans-serif;
  font-weight: lighter;
  color: var(--color-text-secondary);
}

/* Title elements that get populated by JavaScript */
.title {
  font-family: var(--font-heading);
  font-weight: 700;
}

/* =============================================================================
   TOP NAVIGATION
   ============================================================================= */

.top-nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 4;
  background: var(--color-background);
  border-bottom: 1px solid var(--color-border-light);
  padding: var(--spacing-xl) var(--spacing-huge);
  display: flex;
  justify-content: space-between;
  align-items: center;
}

@media screen and (prefers-reduced-motion: no-preference) {
  .top-nav {
    transition:
      color var(--transition-slow),
      background var(--transition-slow),
      border-color var(--transition-slow);
  }
}

.nav-title-section {
  display: flex;
  align-items: baseline;
  gap: var(--spacing-md);
}

.nav-title {
  font-size: var(--text-size-xxl);
  font-weight: var(--font-weight-bold);
  margin: 0;
  text-align: left;
  /* Fallback for older browsers */
  font-family: "Quattrocento", Georgia, "Times New Roman", Times, serif;
  /* Modern browsers with CSS variables */
  font-family: var(--font-heading);
}

.nav-byline {
  font-size: var(--text-size-tiny);
  font-style: italic;
  font-weight: var(--font-weight-light);
  color: var(--color-text-primary);
  margin: 0;
}

.nav-controls {
  display: flex;
  gap: var(--spacing-xl);
  font-size: var(--text-size-medium);
  align-items: center;
}

.nav-controls a {
  font-weight: 700;
  color: var(--color-accent-primary);
  font-family: sans-serif;
  text-decoration: none;
  padding: 4px var(--spacing-md);
  border-radius: var(--border-radius);
  transition: background-color var(--transition-medium);
}

.nav-controls a:hover {
  background-color: var(--color-hover-bg);
}

.nav-controls [disabled] {
  color: var(--color-disabled);
  cursor: not-allowed;
}

/* === MOBILE NAVIGATION === */
@media screen and (max-width: 680px) {
  .top-nav {
    flex-direction: column;
    gap: var(--spacing-md);
    padding: var(--spacing-lg) var(--spacing-xxl);
  }

  .nav-title-section {
    justify-content: center;
  }

  .nav-title {
    text-align: center;
    font-size: var(--text-size-xl);
  }

  .nav-byline {
    display: none;
  }

  .nav-controls {
    justify-content: center;
    flex-wrap: wrap;
    gap: var(--spacing-md);
  }

  .nav-controls a {
    font-size: var(--text-size-small);
    padding: var(--spacing-xs) var(--spacing-sm);
  }
}

/* =============================================================================
   LAYOUT CONTAINERS
   ============================================================================= */

.header {
  padding-top: 1em;
  padding-bottom: 1em;
}

.byline {
  font-style: italic;
}

.outerContainer {
  position: absolute;
  display: block;
  margin: 0;
  padding: 0;
  -webkit-overflow-scrolling: touch;
  overflow: scroll;
  overflow-x: hidden;
  height: 100%;
  width: 100%;
  top: 0;
  left: 0;
  margin-top: var(--nav-height-desktop);
  background-size: cover;
  background-repeat: no-repeat;
}

@media screen and (max-width: 680px) {
  .outerContainer {
    margin-top: var(--nav-height-mobile);
  }
}

.container {
  display: block;
  max-width: var(--content-max-width);
  margin: 0 auto;
  padding: var(--spacing-huge);
  padding-top: 2em;
  padding-bottom: var(--spacing-massive);
  background: var(--color-background);
}

@media screen and (prefers-reduced-motion: no-preference) {
  .switched .container {
    transition: background-color var(--transition-slow);
  }
}

/* =============================================================================
   TEXT STYLES
   ============================================================================= */

p {
  font-size: var(--text-size-base);
  color: var(--color-text-primary);
  line-height: var(--line-height-text);
  font-weight: var(--font-weight-light);
}

a {
  font-weight: 700;
  color: var(--color-accent-primary);
  text-decoration: none;
}

.unclickable {
  font-weight: 700;
  color: var(--color-accent-dark);
  text-decoration: none;
  cursor: not-allowed;
}

a:hover {
  color: var(--color-text-strong);
}

@media screen and (prefers-reduced-motion: no-preference) {
  a {
    transition: color var(--transition-slow);
  }

  a:hover {
    transition: color var(--transition-fast);
  }
}

strong {
  color: var(--color-text-strong);
  font-weight: var(--font-weight-bold);
}

/* =============================================================================
   LISTS AND QUOTES
   ============================================================================= */

ul {
  margin: 0.5em 0;
  padding-left: 1.5em;
  color: var(--color-text-primary);
}

li {
  margin: 0.3em 0;
  line-height: var(--line-height-list);
  color: var(--color-text-primary);
}

blockquote {
  margin: 1em 0;
  padding: 0.5em 1em;
  border-left: 3px solid var(--color-blockquote-border);
  background: var(--color-blockquote-bg);
  font-style: italic;
  color: var(--color-blockquote-text);
}

/* =============================================================================
   CHOICES
   ============================================================================= */

.choice {
  line-height: var(--line-height-choice);
}

:not(.choice) + .choice {
  padding-top: 1em;
}

.choice a,
.choice span {
  font-size: var(--text-size-large);
}

/* =============================================================================
   SPECIAL ELEMENTS
   ============================================================================= */

.end {
  text-align: center;
  font-weight: bold;
  color: var(--color-text-strong);
  padding-top: var(--spacing-huge);
  padding-bottom: var(--spacing-huge);
}

img {
  display: block;
  margin: 0 auto;
  max-width: 100%;
}

.container .hide {
  opacity: 0;
}

.container .invisible {
  display: none;
}

.container > * {
  opacity: 1;
}

@media screen and (prefers-reduced-motion: no-preference) {
  .container > * {
    transition: opacity var(--transition-very-slow);
  }
}

/* =============================================================================
   INLINE STYLES
   ============================================================================= */

code {
  background: var(--color-code-bg);
  padding: 0.2em 0.4em;
  border-radius: var(--border-radius);
  font-family: var(--font-monospace);
  font-size: 0.9em;
  color: var(--color-text-primary);
}

.inline-highlight {
  background: var(--color-highlight);
  padding: 0.1em 0.3em;
}

.inline-important {
  color: var(--color-important);
  font-weight: bold;
}

.inline-quiet {
  color: var(--color-quiet);
  font-size: 0.9em;
}
